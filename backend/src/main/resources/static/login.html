<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BioMeta - Login</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/login.css?v=3.0">
    <link rel="shortcut icon" type="image/x-icon" href="img/logo.png">
</head>
<body>
    <!-- Background com efeitos -->
    <div class="background-effects">
        <div class="particles" id="particles-js"></div>
        <div class="gradient-bg"></div>
    </div>

    <div class="auth-container">
        <!-- Logo e Header -->
        <div class="auth-header">
            <div class="logo">
                <i class="fas fa-dumbbell"></i> BioMeta
            </div>
            <h1>Bem-vindo de volta!</h1>
            <p>Entre na sua conta para continuar sua jornada fitness</p>
        </div>

        <div class="auth-content">
            <!-- Imagem Ilustrativa -->
            <div class="auth-image">
                <div class="image-container">
                    <i class="fas fa-sign-in-alt"></i>
                    <div class="floating-elements">
                        <div class="floating-element element-1">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <div class="floating-element element-2">
                            <i class="fas fa-dumbbell"></i>
                        </div>
                        <div class="floating-element element-3">
                            <i class="fas fa-running"></i>
                        </div>
                        <div class="floating-element element-4">
                            <i class="fas fa-trophy"></i>
                        </div>
                    </div>
                </div>
                <div class="welcome-message">
                    <h3>Continue de onde parou</h3>
                    <p>Acesse seus treinos, dieta e acompanhe seu progresso de onde você estiver.</p>
                </div>
                <div class="quick-stats">
                    <div class="stat">
                        <i class="fas fa-fire"></i>
                        <div>
                            <span class="stat-number">+5K</span>
                            <span class="stat-label">Usuários Ativos</span>
                        </div>
                    </div>
                    <div class="stat">
                        <i class="fas fa-chart-line"></i>
                        <div>
                            <span class="stat-number">98%</span>
                            <span class="stat-label">Satisfação</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Formulário de Login -->
            <div class="auth-form">
                <form id="loginForm">
                    <div class="form-group">
                        <label for="email">
                            <i class="fas fa-envelope"></i> E-mail
                        </label>
                        <input type="email" id="email" required placeholder="seu@email.com">
                    </div>

                    <div class="form-group">
                        <label for="password">
                            <i class="fas fa-lock"></i> Senha
                        </label>
                        <div class="password-container">
                            <input type="password" id="password" required placeholder="Sua senha">
                            <button type="button" class="toggle-password" id="togglePassword">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-options">
                        <label class="remember-me">
                            <input type="checkbox" id="rememberMe">
                            <span class="checkmark"></span>
                            Lembrar de mim
                        </label>
                        <a href="forgot-password.html" class="forgot-password">
                            Esqueceu a senha?
                        </a>
                    </div>

                    <button type="submit" class="btn btn-primary btn-full">
                        <i class="fas fa-sign-in-alt"></i> Entrar na Conta
                    </button>

                    <div class="social-login">
                        <div class="divider">
                            <span>Ou entre com</span>
                        </div>
                        <div class="social-buttons">
                            <button type="button" class="btn-social google" id="googleLogin">
                                <i class="fab fa-google"></i>
                                Google
                            </button>
                            <button type="button" class="btn-social facebook" id="facebookLogin">
                                <i class="fab fa-facebook-f"></i>
                                Facebook
                            </button>
                        </div>
                    </div>
                </form>

                <!-- Mensagens de Feedback -->
                <div id="errorMessage" class="error message-hidden"></div>
                <div id="successMessage" class="success message-hidden"></div>

                <!-- Link para Cadastro -->
                <div class="auth-links">
                    <p>Não tem uma conta? <a href="register.html">Cadastre-se agora</a></p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="js/auth.js"></script>
    
    <!-- SCRIPT CORRIGIDO COM TODAS AS FUNCIONALIDADES -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar partículas (apenas visual)
            initParticles();
            
            // Configurar todas as funcionalidades
            setupLoginFunctionalities();
            
            // Iniciar animações dos elementos
            initAnimations();
            
            // Carregar credenciais salvas se "Lembrar de mim" estava ativo
            loadSavedCredentials();
        });

        // Inicializar partículas no background (apenas visual)
        function initParticles() {
            if (typeof particlesJS !== 'undefined') {
                particlesJS('particles-js', {
                    particles: {
                        number: { value: 40, density: { enable: true, value_area: 800 } },
                        color: { value: "#6c63ff" },
                        shape: { type: "circle" },
                        opacity: { value: 0.2, random: true },
                        size: { value: 3, random: true },
                        line_linked: {
                            enable: true,
                            distance: 120,
                            color: "#6c63ff",
                            opacity: 0.1,
                            width: 1
                        },
                        move: {
                            enable: true,
                            speed: 0.8,
                            direction: "none",
                            random: true
                        }
                    },
                    interactivity: {
                        detect_on: "canvas",
                        events: {
                            onhover: { enable: true, mode: "grab" },
                            onclick: { enable: true, mode: "push" },
                            resize: true
                        }
                    },
                    retina_detect: true
                });
            }
        }

        // Configurar todas as funcionalidades do login
        function setupLoginFunctionalities() {
            // Toggle de visibilidade da senha
            const toggleBtn = document.getElementById('togglePassword');
            if (toggleBtn) {
                toggleBtn.addEventListener('click', togglePasswordVisibility);
            }

            // Validação em tempo real
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            
            if (emailInput) {
                emailInput.addEventListener('input', validateEmailRealTime);
            }
            if (passwordInput) {
                passwordInput.addEventListener('input', validatePasswordRealTime);
            }

            // Botões de login social
            const googleBtn = document.getElementById('googleLogin');
            const facebookBtn = document.getElementById('facebookLogin');
            
            if (googleBtn) {
                googleBtn.addEventListener('click', handleGoogleLogin);
            }
            if (facebookBtn) {
                facebookBtn.addEventListener('click', handleFacebookLogin);
            }

            // Lembrar de mim
            const rememberMe = document.getElementById('rememberMe');
            if (rememberMe) {
                rememberMe.addEventListener('change', handleRememberMe);
            }
        }

        // Iniciar animações
        function initAnimations() {
            animateFloatingElements();
            animateStats();
        }

        // Alternar visibilidade da senha
        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('password');
            const toggleIcon = document.getElementById('togglePassword').querySelector('i');

            if (passwordInput && toggleIcon) {
                const isPasswordVisible = passwordInput.type === 'password';
                passwordInput.type = isPasswordVisible ? 'text' : 'password';
                toggleIcon.className = isPasswordVisible ? 'fas fa-eye-slash' : 'fas fa-eye';
                passwordInput.focus();
            }
        }

        // Validação do email em tempo real
        function validateEmailRealTime() {
            const emailInput = document.getElementById('email');
            const email = emailInput.value.trim();
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            emailInput.classList.remove('valid', 'invalid');

            if (email && emailRegex.test(email)) {
                emailInput.classList.add('valid');
            } else if (email) {
                emailInput.classList.add('invalid');
            }
        }

        // Validação da senha em tempo real
        function validatePasswordRealTime() {
            const passwordInput = document.getElementById('password');
            const password = passwordInput.value;

            passwordInput.classList.remove('valid', 'invalid');

            if (password && password.length >= 6) {
                passwordInput.classList.add('valid');
            } else if (password) {
                passwordInput.classList.add('invalid');
            }
        }

        // Handler para Google Login
        function handleGoogleLogin() {
            showMessage('Login com Google está em desenvolvimento! Em breve disponível.', 'info');
            
            // Feedback visual
            const btn = document.getElementById('googleLogin');
            btn.style.transform = 'scale(0.95)';
            setTimeout(() => {
                btn.style.transform = 'scale(1)';
            }, 150);
        }

        // Handler para Facebook Login
        function handleFacebookLogin() {
            showMessage('Login com Facebook está em desenvolvimento! Em breve disponível.', 'info');
            
            // Feedback visual
            const btn = document.getElementById('facebookLogin');
            btn.style.transform = 'scale(0.95)';
            setTimeout(() => {
                btn.style.transform = 'scale(1)';
            }, 150);
        }

        // Handler para Lembrar de mim
        function handleRememberMe() {
            const rememberMe = document.getElementById('rememberMe');
            const emailInput = document.getElementById('email');
            
            if (rememberMe.checked && emailInput.value) {
                // Salvar no localStorage
                localStorage.setItem('rememberMe', 'true');
                localStorage.setItem('savedEmail', emailInput.value);
                showMessage('Credenciais salvas! Seu e-mail será lembrado.', 'success', 3000);
            } else {
                // Remover do localStorage
                localStorage.removeItem('rememberMe');
                localStorage.removeItem('savedEmail');
            }
        }

        // Carregar credenciais salvas
        function loadSavedCredentials() {
            const rememberMe = localStorage.getItem('rememberMe');
            const savedEmail = localStorage.getItem('savedEmail');
            
            if (rememberMe === 'true' && savedEmail) {
                document.getElementById('rememberMe').checked = true;
                document.getElementById('email').value = savedEmail;
                showMessage('Credenciais carregadas! Digite sua senha.', 'info', 3000);
            }
        }

        // Função para mostrar mensagens
        function showMessage(message, type = 'info', duration = 5000) {
            // Criar elemento de mensagem se não existir
            let messageElement = document.getElementById('infoMessage');
            if (!messageElement) {
                messageElement = document.createElement('div');
                messageElement.id = 'infoMessage';
                messageElement.className = 'info message-hidden';
                document.querySelector('.auth-form').appendChild(messageElement);
            }

            // Configurar cores baseadas no tipo
            const colors = {
                info: '#3498db',
                success: '#2ecc71',
                error: '#e74c3c',
                warning: '#f39c12'
            };

            messageElement.style.background = colors[type] || colors.info;
            messageElement.textContent = message;
            messageElement.classList.remove('message-hidden');

            // Auto-esconder após o tempo especificado
            if (duration > 0) {
                setTimeout(() => {
                    messageElement.classList.add('message-hidden');
                }, duration);
            }
        }

        // Animar elementos flutuantes
        function animateFloatingElements() {
            const elements = document.querySelectorAll('.floating-element');
            elements.forEach((element, index) => {
                const delay = index * 0.5;
                element.style.animationDelay = `${delay}s`;
            });
        }

        // Animar estatísticas
        function animateStats() {
            const stats = document.querySelectorAll('.stat-number');
            
            stats.forEach(stat => {
                const finalValue = stat.textContent;
                let currentValue = 0;
                const duration = 2000;
                const increment = parseInt(finalValue) / (duration / 16);
                
                if (finalValue.includes('+')) {
                    stat.textContent = '+0';
                    const timer = setInterval(() => {
                        currentValue += increment;
                        if (currentValue >= parseInt(finalValue)) {
                            stat.textContent = finalValue;
                            clearInterval(timer);
                        } else {
                            stat.textContent = '+' + Math.floor(currentValue);
                        }
                    }, 16);
                } else if (finalValue.includes('%')) {
                    stat.textContent = '0%';
                    const timer = setInterval(() => {
                        currentValue += increment;
                        if (currentValue >= parseInt(finalValue)) {
                            stat.textContent = finalValue;
                            clearInterval(timer);
                        } else {
                            stat.textContent = Math.floor(currentValue) + '%';
                        }
                    }, 16);
                }
            });
        }
    </script>

</body>
</html>